[phases.setup]
nixPkgs = ["flutter", "python3"]

[phases.install]
cmds = [
  "flutter config --enable-web",
  "flutter pub get"
]

[phases.build]
cmds = [
  "flutter build web --release --no-tree-shake-icons --web-renderer html"
]

[start]
cmd = "python3 -m http.server $PORT"
workDir = "build/web"

[variables]
FLUTTER_WEB_RENDERER = "html"
FLUTTER_BUILD_MODE = "release" 